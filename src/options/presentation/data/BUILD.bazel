load("//tools:bazel/swc.bzl", "swc_pkg")
load("//tools:common_ts_project.bzl", "common_ts_project")
load("//tools/preprocessor:bzl/preprocessor.bzl", "preprocessor")

preprocessor(
    name = "feature_categories",
    src = "featureCategories.pre.ts",
    out = "featureCategories.ts",
    defined_dependencies = select({
        "//:mv3": ["MV3"],
        "//conditions:default": [],
    }) + select({
        "//:is_release": [],
        "//conditions:default": ["NON_RELEASE"],
    }),
)

common_ts_project(
    name = "data",
    srcs = [":feature_categories"],
    allow_js = True,
    declaration = True,
    source_map = True,
    transpiler = swc_pkg,
    tsconfig = "//:tsconfig_pkg",
    visibility = [
        "//docs/features/generate:__subpackages__",
        "//src/lit-locales:__subpackages__",
        "//src/options/presentation/scripts:__subpackages__",
    ],
    deps = [
        "//:node_modules/@lit/localize",
        "//:node_modules/lit",
        "//src/features/autoRefresh/presentation/options",
        "//src/features/avatars/presentation/options",
        "//src/features/batchLock/presentation/options",
        "//src/features/blockDrafts/presentation/options",
        "//src/features/bulkMove/presentation/options",
        "//src/features/bulkReportReplies/presentation/options",
        "//src/features/ccDarkTheme/presentation/options",
        "//src/features/ccDragAndDropFix/presentation/options",
        "//src/features/ccForceHideDrawer/presentation/options",
        "//src/features/enhancedAnnouncementsDot/presentation/options",
        "//src/features/extraInfo/presentation/options",
        "//src/features/fixPEKB381989895/presentation/options",
        "//src/features/fixedToolbar/presentation/options",
        "//src/features/flattenThreads/presentation/options",
        "//src/features/imageMaxHeight/presentation/options",
        "//src/features/increaseContrast/presentation/options",
        "//src/features/infiniteScroll/presentation/options",
        "//src/features/interopThreadPage/presentation/options",
        "//src/features/linkDialogFix/presentation/options",
        "//src/features/loadDrafts/presentation/options",
        "//src/features/logStartupData/presentation/options",
        "//src/features/previousPosts/presentation/options",
        "//src/features/profileIndicator/presentation/options",
        "//src/features/redirect/presentation/options",
        "//src/features/repositionExpandThread/presentation/options",
        "//src/features/simulateRoles/presentation/options",
        "//src/features/stickySidebarHeaders/presentation/options",
        "//src/features/uiSpacing/presentation/options",
        "//src/options/presentation/models",
    ],
)
